0412 화요일

JSON 제이슨 
자바말고 자바 스크립트와 연관이 있다. 
Java Script Object Notation
script에는 object라는 개념이 없음.

자바스크립트는 선언시에는 데이터의 타입을 알 수가 없다. <<중요✿✿
안에 뭐가 들어가야 알 수 있음.
var str;하면 뭔지 모른다. 그냥 str이라는 변수.
str = 10; 하면 숫자형 변수.
str = "hong";하면 error가~ 아니야
alert(str); >> 이때는 마지막에 입력된 "hong"이 출력됨.

var
const obj; const는 object로 정의하겠다는 뜻.
변수와 배열의 차이와(다양한 데이터가 들어갈 수 있는 js 배열)
json은 중첩할 수도 있고 해서 요즘은 var보다는 const를 많이 쓴다고 해용
(var은 오류가 나지는 않지만)
let


제이슨 형태 w3schools.com
{}로 시작하면 제이슨이라고 생각하기✿
(cf) []로 시작하면 배열)

{"name":value, "name":value,,,,}
value를 꺼내기 위해 "name"이 필요.

JSON Syntax Rules 
Data is in name/value pairs
Data is separated by commas
Curly braces hold objects{}
Square brackets hold arrays[]

JSON values
json안에 object가 들어갈 수 있다 >> json 본인이 또 들어갈 수 있다는 뜻... {}안에 {}가 또 들어갈 수 있는 것임.

{"name":"당귄이"} name은 name이고 value는 String
{"age": 1}
{"obj": {"name":"석식이"}} obj라는 이름은 json 객체를 가리킨다.
{"array":[1,2,3,4,5]}
{"boolean":true}
{"str": null}

"를 매번 안 붙여도 browser의 interpreter가 처리해준다.
"말고 single quotation mark를 붙여도 괜찮다.(script에서 실행할 때)
중요한 건 value값✿

꺼내 쓰려면 앞에 이름이 필요
penguin = {name:"당귄이", age:1, city:"성남시"};
자바처럼 . 을 써서 원하는 걸 꺼내올 수 있다
penguin.name = "당귄이"
penguin.age = 1 
penguin.city = "경기도"

p1 = {"name":"당귄이"} 
p2 = {"age": 1}
p3 = {"obj": {"name":"석식이"}}✿
p4 = {"array":[1,2,3,4,5]}✿
p5 = {"boolean":true}
p6 = {"str": null}

✿new 해서 p1 객체를 생성할 필요 X
p1.name; //당귄이
p2.age; //1

✿석식이는 어떻게 찍는가..✿
p3.obj.name;
p3이 가진 obj를 먼저 찾자 p3.obj (이건 그냥 object)
>>이 obj가 가리키는 name을 찾으면 된다. .name으로

✿p4에서는 데이터를 어케 가져오나용✿
p4.array;하면 array object가 나옴
p4.array[2]; //3
배열의 index는 0으로부터 시작하는 거 잊지 말기

p5.boolean; //true
p6.str; //null

✿데이터를 받을 때 json이나 xml 형태로 받는다.
json으로 많이 받는 편.
(xml이 뭐임?)

{"employees":[
  { "firstName":"John", "lastName":"Doe" },
  { "firstName":"Anna", "lastName":"Smith" },
  { "firstName":"Peter", "lastName":"Jones" }
]}

employees[2].firstName; // Peter
{

{
"employee":{"name":"John"(여기에 존 대신 또다른 json객체도 들어갈 수 있음), "age":30, "city":"New York"}
}

데이터만 담을 수 있고 function은 못 들어감.✿

myweb에 06_json.html만들기
jsp가 아니야!

제이슨을 브라우저에 출력하기.
넣어주는 행위를 자바스크립트가 한다.... DHTML
dynamic HTML: 어느 기능이 실행되었을 때 어?뭐더라?
처음엔 없었는데 나중에 생기는 그런 거,,,를 동적인 html 이라고 한다고 함.
html을 script에서 만들어 주는 것임.

dhtml이 js인지 jquery인지에 따라 다름
js는 innerHTML
jquery는 아이디와 html 메소드를 많이 쓴다고 하네용

cdn으로 jquery를 쓸 때는 인터넷으로 접속이 가능해야 한다.

$('#어떤div').✿
.html(<안에 태그를 이렇게 넣을 수가 있습니다><p>우사다 페코라페코</p>);

html()메소드에는 단점이 있다. html을 여러개 실행하면 실행 후 새로 덮어쓰기 때문에 마지막 것만 남음(원리는 모른다)
값들을 추가할 때는 대신 append()✿를 쓴다.

.after(쓸 내용); $태그 다음에 쓸 내용이 온다.✿
//h1태그 없이 body안에 직고 싶으면 body.after가 아니라~ body.append

js, jquery에서 서버 연동할 때 ajax를 쓰면 된다.

스타일은 가장 마지막에 적용된다.

✿사원이 늘어났어!
var employees = {"name":배열}
배열 = [{},{},{}]..

var employees = {"list":[
		      {"empno": 7536, "name":"hong","job":"manager", "deptno":20},
		      {"empno": 1234, "name":"john","job":"sales", "deptno":30}
		]};
이런 생김새가 되는 것임.

확장, 향상, 개선된 for문. 정말, 모르,겟어,, for(var i in employees.list)✿
for (String s: arr){
}
이건 알겠어!
근데 for(var i in list)는 모르겟음


✿이제부터 빡세지기 시작이야!✿
실제 json을 쓸 것이기 때문이와요

https://www.kobis.or.kr/kobisopenapi/homepg/apiservice/searchServiceInfo.do?serviceId=searchDailyBoxOffice
kobis open api 
일별 박스오피스 api
rest방식
4. 응답예시 copy

rank, movieNm, openDt, audiAcc

편하게 데이터를 가져오기 위한 get json 기능이 있음 jquery에.
https://api.jquery.com/jQuery.getJSON/#jQuery-getJSON-url-data-success

$.getJSON( "ajax/test.json", function( data ) { //주소가 맞으면 이 데이터를 가져와서 function 내부를 진행.
  var items = [];			//alert(data);하면 object object가 뜬다. null이나 undefined는 값을 가져오지 못한 것.
  $.each( data, function( key, val ) {
    items.push( "<li id='" + key + "'>" + val + "</li>" );
  });
 
  $( "<ul/>", {
    "class": "my-new-list",
    html: items.join( "" )
  }).appendTo( "body" );
});

jquery 객체 지울 때 remove.

script는 .js파일로 만들어 놓기
File로 만든다.


oracle data를 json형태로 만들어서 화면에 뿌림.
jsp 코드를 쓰지 않고 
스크립트에서 ajax를 이용하여 서버 접속 ----> jsp 파일 ------> dao에서 출력하는 데이터 셋(ArrayList<VO객체>)
			<----- result 1,0(out.write(String.valueOf(result)) 어제 쓴 방법
			<----- 데이터셋: ArrayList<VO객체>
	ArrayList는 자바에서 사용. 
	js에선 json을 사용. 데이터셋: ArrayList 대신 json을 쓴다.

허미 어렵구만요


GSON 라이브러리(maven repository)
2.8.5
web content > web-inf > lib에 집어넣기.

var jdata ={"jlist":[{"empno":1234,"ename":"춘식"},{"empno":1235, "ename":"라이언"},,,,]};
이런 형식으로 만들고 싶음.

전체의 JSON 객체를 만드는 JsonObject 메소드
obj.addProperty("job", vo.getJob());
데이터를 json 데이터로 변환한 gson

데이터를 전송하면 String 타입이 되어버린 result.
>>json 객체로 파싱 - JSON.parse(서버에서 전송된 문자열. 생긴게 완전 json type이어야)